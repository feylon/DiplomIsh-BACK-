import{r as S,o as b,an as C,a1 as T,j as l,H as s,V as e,u as V,a as q,I as A,b as D,w as c,d as i,_ as N,f as v,aK as j,U as w,e as a,k as E,x as m,B,F as H,D as z,ao as F}from"./index-BPmJ8zEA.js";import{_ as U}from"./Student-BQvuZ4Tn.js";const G={__name:"TimeAgo",props:{date:{type:String,required:!0}},setup(g){const d=g,p=S("");let r=null;function f(o){const u=new Date,_=new Date(o);let t=Math.floor((u-_)/1e3);const h=Math.floor(t/(3600*24));t-=h*3600*24;const $=Math.floor(t/3600);t-=$*3600;const k=Math.floor(t/60);t-=k*60;const I=t,y=M=>String(M).padStart(2,"0");return` ${y($)} soat : ${y(k)} daqiqa : ${y(I)} soniya`}function n(){p.value=f(d.date),r=setInterval(()=>{p.value=f(d.date)},1e3)}return b(()=>{n()}),C(()=>{r&&clearInterval(r)}),T(()=>d.date,()=>{r&&clearInterval(r),n()}),(o,u)=>(s(),l("div",null,e(p.value),1))}},K={key:0},L={key:1},R={key:0,class:"flex gap-1 min-w-[170px]"},J={key:0},O={key:1},P={key:2},Q={key:1},Y={__name:"History",setup(g){const{t:d,locale:p}=V();F(),q();const r=A([]),f=async()=>{const n=window.url;r.length=0;try{const o=await fetch(`${n}/student/gethistory`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"application/json"}});if(o.status==200){let u=await o.json();console.log(u),u.forEach(_=>{r.push(_)})}}catch(o){console.log(o)}};return b(async()=>{f()}),(n,o)=>{const u=w("n-tag"),_=w("n-table");return s(),D(U,null,{default:c(()=>[i(z,null,{default:c(()=>[i(N,{icon:v(j),title:v(d)("History"),main:""},null,8,["icon","title"]),i(_,{bordered:!1,"single-line":!1},{default:c(()=>[a("thead",null,[a("tr",null,[o[0]||(o[0]=a("th",null,"â„–",-1)),a("th",null,e(n.$t("Bino nomi")),1),a("th",null,e(n.$t("enter_time")),1),a("th",null,e(n.$t("exit_time")),1),a("th",null,e(n.$t("holati")),1),a("th",null,e(n.$t("Binoda o`tgazgan vaqti")),1)])]),a("tbody",null,[(s(!0),l(H,null,E(r,(t,h)=>(s(),l("tr",{key:h},[a("td",null,e(h+1),1),a("td",null,e(t.build_name),1),a("td",null,e(t.enter_time),1),a("td",null,e(t.exit_time),1),a("td",null,[t.status=="in"?(s(),l("span",K,[i(u,{type:"warning"},{default:c(()=>[B(e(n.$t("in")),1)]),_:1})])):t.status=="out"?(s(),l("span",L,[i(u,{type:"success"},{default:c(()=>[B(e(n.$t("out")),1)]),_:1})])):m("",!0)]),a("td",null,[t.time?(s(),l("span",R,[t.time.hours?(s(),l("span",J,e(t.time.hours)+" "+e(n.$t("soat")),1)):m("",!0),t.time.minutes?(s(),l("span",O,e(t.time.minutes)+" "+e(n.$t("minut")),1)):m("",!0),t.time.seconds?(s(),l("span",P,e(t.time.seconds)+" "+e(n.$t("soniya")),1)):m("",!0)])):(s(),l("span",Q,[i(u,{type:"info"},{default:c(()=>[i(G,{date:t.enter_time},null,8,["date"])]),_:2},1024)]))])]))),128))])]),_:1})]),_:1})]),_:1})}}};export{Y as default};
