import{S as T,u as A,I as B,r as f,o as E,a as q,c as $,b as M,w as g,d as r,e,_ as V,f as v,m as I,V as a,s as j,B as N,U as b,W as U,j as k,k as D,F,D as G,E as O,H as w}from"./index-BPmJ8zEA.js";const H={class:"w-max-[400px] shadow-lg rounded-lg bg-white dark:bg-gray-800 p-4 mb-6"},J={class:"flex items-center justify-between mb-4"},L={class:"text-lg font-semibold text-gray-800 dark:text-white"},P={class:"flex gap-5"},W={class:"mb-4 flex flex-col w-[500px]"},Y={class:"font-semibold mb-2"},K={class:"mb-4 flex flex-col w-[500px]"},Q={class:"font-semibold mb-2"},R={class:"mb-4 flex flex-col w-[500px]"},X={class:"font-semibold mb-2"},Z={class:"flex justify-end"},ee={class:"text-[25px]"},le={__name:"Builds",setup(se){const _=T(),{t:d,locale:te}=A(),c=B([]),u=f(null),m=f(null),p=f(null),z=async()=>{const l=window.url+"/superadmin/getadmin?page=1&size=1000",t={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token};try{let o=await fetch(l,{method:"GET",headers:t});if(console.log(o.status),o.status==400){const s=await o.json();console.log(s),console.log(s)}if(o.status==200){c.splice(0);const s=await o.json();s.students.forEach(n=>{console.log(n.id,n.full_name),c.push({label:n.full_name,value:n.id}),s.students.length>0&&(u.value=s.students[0].id)}),console.log(c)}}catch(o){console.log(o)}};f(null);const h=B([]),S=async()=>{const l=window.url+"/superadmin/getbuild?page=1&size=1000",t={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token};try{let o=await fetch(l,{method:"GET",headers:t});if(console.log(o.status),o.status==400){const s=await o.json();console.log(s),console.log(s)}if(o.status==200){const s=await o.json();console.log(s),h.splice(0),s.data.forEach(n=>{h.push(n)}),console.log(h)}}catch(o){console.log(o)}};E(()=>{z(),S()});const y=q();$(()=>y.clients.slice(0,4)),$(()=>y.history);const C=async()=>{const l={user_id:u.value,name:m.value,description:p.value},t=window.url+"/superadmin/addbuild",o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token};try{console.log(l);let s=await fetch(t,{method:"POST",headers:o,body:JSON.stringify(l)});if(console.log(s.status),s.status==409){_.error("Bunday bino mavjud!");return}if(s.status==400){const n=await s.json();console.log(n),_.error(n.message)}if(s.status==201){const n=await s.json();_.success(d("Bino muvaffaqiyatli qo`shildi!")),console.log(n),m.value=null,p.value=null,u.value=null}}catch(s){console.log(s)}};return(l,t)=>{const o=b("n-input"),s=b("n-select"),n=b("n-table");return w(),M(O,null,{default:g(()=>[r(G,null,{default:g(()=>[r(V,{icon:v(I),title:v(d)("Bino qo`shish"),main:""},null,8,["icon","title"]),e("div",null,[e("div",H,[e("div",J,[e("h2",L,a(l.$t("Bino qo`shish")),1),r(j,{type:"primary",onClick:t[0]||(t[0]=i=>l.$router.push({name:"superadmin.add-admin"}))},{default:g(()=>t[5]||(t[5]=[N("Add Admin")])),_:1})]),e("div",P,[e("div",W,[e("span",Y,a(l.$t("Binoning nomi")),1),r(o,{value:m.value,"onUpdate:value":t[1]||(t[1]=i=>m.value=i),type:"text",size:"large",placeholder:v(d)("A bino")},null,8,["value","placeholder"])]),e("div",K,[e("span",Q,a(l.$t("Masul shaxs")),1),r(s,{size:"large",value:u.value,"onUpdate:value":t[2]||(t[2]=i=>u.value=i),options:c},null,8,["value","options"])]),e("div",R,[e("span",X,a(l.$t("Izoh")),1),r(o,{value:p.value,"onUpdate:value":t[3]||(t[3]=i=>p.value=i),type:"textarea",placeholder:"....."},null,8,["value"])])]),e("div",Z,[r(j,{onClick:t[4]||(t[4]=i=>C()),class:U("max-h-[50px] max-w-[150px]"),color:"info",label:v(d)("Submit")},null,8,["label"])]),e("h2",ee,a(l.$t("Binolalar ro'yxati")),1),r(n,{bordered:!1,"single-line":!1},{default:g(()=>[e("thead",null,[e("tr",null,[t[6]||(t[6]=e("th",null,"â„–",-1)),e("th",null,a(l.$t("Binoni nomi")),1),e("th",null,a(l.$t("Mas'ul shaxs")),1),e("th",null,a(l.$t("Yaratilgan vaqt")),1),e("th",null,a(l.$t("Izoh")),1)])]),e("tbody",null,[(w(!0),k(F,null,D(h,(i,x)=>(w(),k("tr",{key:x},[e("td",null,a(x+1),1),e("td",null,a(i.name),1),e("td",null,a(i.full_name),1),e("td",null,a(i.created_at),1),e("td",null,a(i.description),1)]))),128))])]),_:1})])])]),_:1})]),_:1})}}};export{le as default};
