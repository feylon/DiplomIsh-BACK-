import{r as w,o as S,an as N,a1 as I,j as i,H as o,V as e,u as q,a as T,I as j,S as V,b as B,w as _,d as c,e as t,_ as A,f as C,U as b,x as v,k as D,B as k,F as O,D as F,ao as H}from"./index-CHLpyvbT.js";import{_ as U}from"./Admin-ES92iUVR.js";const z={__name:"TimeAgo",props:{date:{type:String,required:!0}},setup(x){const d=x,h=w("");let l=null;function m(f){const n=new Date,u=new Date(f);let r=Math.floor((n-u)/1e3);const a=Math.floor(r/(3600*24));r-=a*3600*24;const p=Math.floor(r/3600);r-=p*3600;const s=Math.floor(r/60);r-=s*60;const y=r,$=M=>String(M).padStart(2,"0");return` ${$(p)} soat : ${$(s)} daqiqa : ${$(y)} soniya`}function g(){h.value=m(d.date),l=setInterval(()=>{h.value=m(d.date)},1e3)}return S(()=>{g()}),N(()=>{l&&clearInterval(l)}),I(()=>d.date,()=>{l&&clearInterval(l),g()}),(f,n)=>(o(),i("div",null,e(h.value),1))}},E={class:"shadow max-w-[400px] p-4 rounded-2xl flex items-center"},P={class:"font-bold text-gray-600 text-[16px]"},J={class:"mt-4"},L={key:0,colspan:"7"},R={class:"w-full cursor-none opacity-45 select-none text-red-700 flex justify-center mt-2 mb-2"},G={class:"font-bold text-[13px]"},K={class:"min-w-[100px] block text-center"},Q={key:0},W={key:0,class:"flex gap-1 min-w-[170px]"},X={key:0},Y={key:1},Z={key:2},tt={key:1},et=["src"],at={__name:"History",setup(x){const{t:d,locale:h}=q(),l=w("in");H(),T();const m=j([]),g=w([{label:d("Binoda qolganlar"),value:"in"},{label:d("Binodan chiqib ketganlar"),value:"out"}]);V();const f=async n=>{m.length=0;const u=window.url;console.log(u);const r=`${u}/admin/statistics`;try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:n})});if(console.log(a.status),a.status==200){const p=await a.json();console.log(p),Object.assign(m,p)}}catch(a){console.log(a)}};return S(async()=>{f("in")}),I(l,n=>f(n)),(n,u)=>{const r=b("n-select"),a=b("n-tag"),p=b("n-table");return o(),B(U,null,{default:_(()=>[c(F,null,{default:_(()=>[c(A,{icon:"mdiMagnifyScan",title:C(d)("Tarix"),main:""},null,8,["title"]),t("div",E,[t("span",P,e(n.$t("Statusni belgilang")),1),c(r,{value:l.value,"onUpdate:value":u[0]||(u[0]=s=>l.value=s),filterable:"",placeholder:"",options:g.value},null,8,["value","options"])]),t("div",J,[c(p,{bordered:!1,"single-line":!1},{default:_(()=>[t("thead",null,[t("tr",null,[u[1]||(u[1]=t("th",null,"â„–",-1)),t("th",null,e(n.$t("FullName")),1),t("th",null,e(n.$t("PHONE")),1),t("th",null,e(n.$t("groupname")),1),t("th",null,e(n.$t("enter_time")),1),t("th",null,e(n.$t("exit_time")),1),t("th",null,e(n.$t("Binoda o`tgazgan vaqti")),1),u[2]||(u[2]=t("th",null,null,-1))])]),t("tbody",null,[t("tr",null,[m.length==0&&l.value=="in"?(o(),i("td",L,[t("div",R,[t("b",null,e(n.$t("Bino bosht")),1)])])):v("",!0)]),(o(!0),i(O,null,D(m,(s,y)=>(o(),i("tr",{key:y},[t("td",null,e(++y),1),t("td",null,[t("span",G,e(s.full_name),1)]),t("td",null,e(s.user_phone),1),t("td",null,[t("span",K,e(s.groupname),1)]),t("td",null,[c(a,{type:"success"},{default:_(()=>[k(e(s.enter_time),1)]),_:2},1024)]),t("td",null,[l.value=="out"?(o(),i("span",Q,[c(a,{type:"info"},{default:_(()=>[k(e(s.exit_time),1)]),_:2},1024)])):(o(),B(a,{key:1,type:"info"},{default:_(()=>[k(e(n.$t("Binoda")),1)]),_:1}))]),t("td",null,[s.time?(o(),i("span",W,[s.time.hours?(o(),i("span",X,e(s.time.hours)+" "+e(n.$t("soat")),1)):v("",!0),s.time.minutes?(o(),i("span",Y,e(s.time.minutes)+" "+e(n.$t("minut")),1)):v("",!0),s.time.seconds?(o(),i("span",Z,e(s.time.seconds)+" "+e(n.$t("soniya")),1)):v("",!0)])):(o(),i("span",tt,[c(a,{type:"info"},{default:_(()=>[c(z,{date:s.enter_time},null,8,["date"])]),_:2},1024)]))]),t("td",null,[t("img",{src:s.img_url,class:"rounded-[10px] w-min-[200px]",alt:""},null,8,et)])]))),128))])]),_:1})])]),_:1})]),_:1})}}};export{at as default};
